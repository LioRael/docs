---
title: "自动拾取系统"
description: "自动拾取系统允许你配置规则，使符合条件的物品自动存入指定保险库。"
---

## 功能概述

### 工作原理

1. 玩家拾取物品时触发检测
2. 系统检查玩家关联的保险库的自动拾取规则
3. 如果物品匹配某条规则，自动存入对应保险库
4. 玩家收到存入成功的提示消息

### 权限要求

使用自动拾取功能需要权限：`zephyrion.auto-pick-items`

## 规则类型

### 拾取规则 (ITEM_PICKUP)

匹配的物品会自动存入保险库。

**图标颜色**：绿色 ✓

### 不拾取规则 (ITEM_NOT_PICKUP)

匹配的物品不会自动存入，进入玩家背包。

**图标颜色**：红色 ✗

### 优先级

**不拾取规则优先于拾取规则**

如果一个物品同时匹配拾取规则和不拾取规则，物品不会被自动存入。

### 示例场景

设置以下规则：

- 拾取规则：`type:DIAMOND`（拾取所有钻石类物品）
- 不拾取规则：`name:钻石剑`（不拾取钻石剑）

结果：

- 钻石 → 自动存入
- 钻石块 → 自动存入
- 钻石剑 → 进入背包（被不拾取规则排除）

## 规则格式

### 按材料类型匹配

```
type:材料名称
```

**示例：**

- `type:DIAMOND` - 匹配钻石
- `type:IRON_INGOT` - 匹配铁锭
- `type:GOLDEN_APPLE` - 匹配金苹果

> 材料名称使用 Minecraft 内部名称，全大写，单词用下划线连接

### 按物品名称匹配

```
name:名称关键词
```

**示例：**

- `name:钻石` - 匹配名称包含"钻石"的物品
- `name:Legendary` - 匹配名称包含"Legendary"的物品

> 名称匹配不区分大小写

### 按 Lore 内容匹配

```
lore:Lore关键词
```

**示例：**

- `lore:稀有` - 匹配 Lore 中包含"稀有"的物品
- `lore:品质:传说` - 匹配 Lore 中包含"品质:传说"的物品

> Lore 匹配会检查所有行，不区分大小写

### 正则表达式匹配名称

```
regex:正则表达式
```

**示例：**

- `regex:.*钻石.*` - 匹配名称包含"钻石"的物品
- `regex:^传说.*剑$` - 匹配以"传说"开头、"剑"结尾的名称
- `regex:等级:\d+` - 匹配包含"等级:数字"的名称

### 正则表达式匹配 Lore

```
regex-lore:正则表达式
```

**示例：**

- `regex-lore:伤害:\s*\d+` - 匹配 Lore 中有"伤害: 数字"的物品
- `regex-lore:^\[稀有\]` - 匹配 Lore 某行以"[稀有]"开头的物品

### 简单文字匹配（默认）

直接输入文字，默认匹配物品名称：

```
钻石
```

等同于 `name:钻石`

## 管理规则

### 进入规则管理界面

1. 进入保险库管理界面（右键点击保险库）
2. 点击「自动拾取规则」

### 规则列表界面

```
┌─────────────────────────────────────────┐
│  自动拾取规则                            │
├─────────────────────────────────────────┤
│  [✓拾取:钻石] [✗不拾取:圆石] [        ]   │
│  [        ]   [        ]   [        ]   │
│  [        ]   [        ]   [        ]   │
│  [        ]   [        ]   [        ]   │
├─────────────────────────────────────────┤
│  [返回] [信息] [添加] [清空] [搜索]       │
└─────────────────────────────────────────┘
```

### 添加规则

#### 方式一：手动输入

1. 点击「添加规则」按钮
2. 左键添加**拾取规则**，右键添加**不拾取规则**
3. 在聊天框输入规则内容
4. 输入 `cancel` 取消

#### 方式二：放入物品快速添加（推荐）

1. 点击「放入物品添加」按钮
2. 将目标物品放入指定槽位
3. 选择规则类型（拾取/不拾取）
4. 选择匹配方式：
   - **按材料类型** - 匹配相同类型的所有物品
   - **按物品名称** - 匹配名称包含该物品名的物品
   - **精确名称匹配** - 匹配名称完全相同的物品
   - **按Lore内容** - 匹配 Lore 相似的物品

### 编辑规则

1. 在规则列表中**左键点击**规则
2. 在聊天框输入新的规则值
3. 输入 `cancel` 取消

### 删除规则

在规则列表中**右键点击**规则即可删除。

### 清空所有规则

1. 点击「清空」按钮
2. 在聊天框输入 `Y` 确认
3. 输入其他内容取消

### 搜索规则

支持按规则值或类型搜索：

- **规则值**：搜索规则内容包含关键词
- **规则类型**：输入"拾取"或"不拾取"

## 常用规则示例

### 矿石自动收集

```
拾取规则：
- type:DIAMOND
- type:EMERALD
- type:GOLD_INGOT
- type:IRON_INGOT
- type:COAL
- type:LAPIS_LAZULI
- type:REDSTONE
```

### 排除垃圾物品

```
不拾取规则：
- type:COBBLESTONE
- type:DIRT
- type:GRAVEL
- type:ANDESITE
- type:DIORITE
- type:GRANITE
```

### 收集稀有装备

```
拾取规则：
- lore:稀有
- lore:史诗
- lore:传说
- regex:等级需求:\s*[5-9]\d  (50级以上装备)
```

### RPG 物品分类

```
武器仓库拾取规则：
- lore:类型: 武器
- regex-lore:攻击力:\s*\d+

防具仓库拾取规则：
- lore:类型: 防具
- regex-lore:防御力:\s*\d+
```

## 工具自动替换

除了自动拾取，Zephyrion 还支持工具自动替换功能。

详细说明请参阅 [工具自动替换](./auto-replace.md)。

## 注意事项

### 性能考虑

- 规则过多可能影响拾取性能
- 尽量使用精确匹配（type）而非模糊匹配（regex）
- 正则表达式应尽量简单

### 规则冲突

- 同一物品可能匹配多条规则
- 不拾取规则始终优先
- 建议规则设计时避免歧义

### 缓存机制

- 自动拾取规则会被缓存
- 修改规则后缓存会自动更新
- 如遇问题可让管理员执行 `/ze reload`

### 独立工作空间

在独立工作空间中，自动拾取会将物品存入当前玩家的独立存储区域。