---
title: "保险库操作"
description: "保险库是 Zephyrion 中实际存储物品的容器。"
---

## 创建保险库

### 步骤

1. 进入目标工作空间
2. 点击「创建仓库」按钮
3. 设置保险库名称（必填）
4. 设置描述（可选）
5. 确认创建

### 名称规则

- 长度：3-16 个字符
- 不能包含空格
- 不能使用颜色代码（除非服务器允许）
- 不能使用黑名单中的词汇
- 同一工作空间下不能重名

## 存储物品

### 基本存储

1. 进入保险库
2. 将物品从背包拖到保险库界面的空槽位
3. 物品自动保存到数据库

### 快速存储

- **Shift + 左键**：快速将物品移入保险库
- 物品会自动放入第一个可用槽位

### 槽位状态

| 状态  | 显示    | 说明       |
| --- | ----- | -------- |
| 空闲  | 空格子   | 可以放入物品   |
| 已占用 | 显示物品  | 点击可取出    |
| 锁定  | 🔒 图标 | 需要解锁才能使用 |

## 取出物品

### 基本取出

1. 点击保险库中的物品
2. 物品自动进入背包

### 快速取出

- **Shift + 左键**：快速将物品移出保险库

### 背包已满

如果背包已满，物品会掉落在脚下。

## 解锁槽位

新创建的保险库没有可用槽位，需要解锁。

### 解锁步骤

1. 点击锁定的槽位（🔒 图标）
2. 在聊天框输入要解锁的数量
3. 输入 `0` 取消操作

### 解锁限制

- 只有工作空间创建者可以解锁槽位
- 解锁需要消耗存储配额
- 如果配额不足，解锁会失败

### 解锁示例

```
[Zephyrion] 请输入解锁槽位数量, 输入 0 取消
玩家输入: 36
[Zephyrion] 36 个槽位已解锁
```

## 分页浏览

每页显示 36 个槽位（6行 x 6列）。

### 翻页

- 点击「上一页」：查看前一页
- 点击「下一页」：查看后一页

### 页码显示

界面会显示当前页码和总页数，例如 `第 1/5 页`。

## 搜索物品

### 打开搜索

点击保险库界面底部的「搜索」按钮。

### 搜索条件

| 条件     | 说明             |
| ------ | -------------- |
| 物品名称   | 搜索名称包含关键词的物品   |
| 物品Lore | 搜索Lore包含关键词的物品 |

### 组合搜索

可以同时设置多个搜索条件，结果取交集。

### 搜索结果界面

```
┌─────────────────────────────────────────┐
│  仓库: MyVault (搜索结果)                │
├─────────────────────────────────────────┤
│  [匹配物品1] [匹配物品2] [匹配物品3]      │
│  [匹配物品4] [        ] [        ]      │
│  [        ] [        ] [        ]       │
│  [        ] [        ] [        ]       │
├─────────────────────────────────────────┤
│  [搜索信息]    [翻页]    [退出搜索]       │
└─────────────────────────────────────────┘
```

### 搜索信息

显示当前搜索条件和结果数量：

- 找到 X 个物品
- 搜索条件列表
- 点击可修改搜索条件

### 退出搜索

点击「退出搜索」返回正常浏览模式。

## 管理保险库

### 进入管理界面

在保险库列表中，**右键点击**保险库图标。

### 管理功能

```
┌─────────────────────────────────────────┐
│  仓库管理                                │
├─────────────────────────────────────────┤
│                                         │
│     [仓库信息]                           │
│                                         │
│  [修改名称]  [修改描述]  [自动拾取规则]    │
│                                         │
│            [删除仓库]                     │
│                                         │
├─────────────────────────────────────────┤
│              [返回]                      │
└─────────────────────────────────────────┘
```

### 修改名称

1. 点击「修改名称」
2. 在聊天框输入新名称
3. 自动验证并保存

### 修改描述

1. 点击「修改描述」
2. 在聊天框输入新描述
3. 自动保存

### 自动拾取规则

点击进入自动拾取规则管理界面，详见 [自动拾取系统](./auto-pickup.md)。

### 删除保险库

1. 点击「删除仓库」
2. 在聊天框输入 `Y` 确认
3. 输入其他内容或等待超时取消

> **警告**：删除保险库会同时删除其中所有物品，此操作不可恢复！

## 容量管理

### 查看容量

保险库信息中显示：

- 当前容量（已解锁的槽位数）
- 已使用的槽位数
- 总页数

### 容量计算

- 每页 36 个槽位
- 总页数 = 向上取整(容量 / 36)
- 至少显示 1 页

### 扩容

通过解锁槽位来扩展保险库容量：

1. 点击锁定槽位
2. 输入解锁数量
3. 消耗相应的存储配额

### 缩容

目前不支持主动缩小容量，删除保险库会释放所有占用的配额。

## 独立工作空间的特殊行为

在**独立工作空间**中，保险库的物品存储是按玩家独立的：

- 玩家 A 存放的物品只有 A 能看到和取出
- 玩家 B 在同一保险库中看到的是自己的物品
- 搜索只搜索当前玩家的物品

## 多人同时访问

### 公共工作空间

- 多人可以同时打开同一保险库
- 物品变化会实时同步给所有查看者
- 先点击的人优先获得物品

### 数据同步

Zephyrion 使用 `VaultSyncService` 实现多用户实时同步：

- 物品添加会立即通知其他查看者
- 物品移除会立即从其他人界面消失
- 搜索结果也会实时更新

## 注意事项

### 配额检查

解锁槽位前会检查配额，确保有足够的存储配额。

### 数据安全

- 所有物品操作都会立即保存到数据库
- 服务器重启不会丢失物品
- 物品使用 Base64 序列化，保留所有 NBT 数据

### 性能建议

- 避免创建过多小容量保险库
- 合理规划物品分类，便于搜索
- 使用自动拾取功能减少手动操作