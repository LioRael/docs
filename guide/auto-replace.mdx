---
title: "工具自动替换"
description: "工具自动替换功能可以在你的工具损坏时，自动从保险库中取出同类型的替换工具。"
---

## 功能概述

### 工作原理

1. 玩家手持的工具/装备耐久度耗尽损坏
2. 系统检测玩家是否有自动替换权限
3. 搜索玩家所有保险库中的同类型物品
4. 自动将替换物品放入玩家手中
5. 玩家收到替换成功的提示消息

### 权限要求

使用自动替换功能需要权限：`zephyrion.auto-replace-tool`

## 支持的物品类型

### 工具类

| 分类 | 支持的物品（按品质排序）          |
| --- | --------------------- |
| 镐  | 下界合金镐、钻石镐、铁镐、金镐、石镐、木镐 |
| 斧  | 下界合金斧、钻石斧、铁斧、金斧、石斧、木斧 |
| 锹  | 下界合金锹、钻石锹、铁锹、金锹、石锹、木锹 |
| 锄  | 下界合金锄、钻石锄、铁锄、金锄、石锄、木锄 |
| 剑  | 下界合金剑、钻石剑、铁剑、金剑、石剑、木剑 |

### 装备类

| 分类 | 支持的物品（按品质排序）                      |
| --- | --------------------------------- |
| 头盔 | 下界合金头盔、钻石头盔、铁头盔、金头盔、锁链头盔、皮革头盔、海龟壳 |
| 胸甲 | 下界合金胸甲、钻石胸甲、铁胸甲、金胸甲、锁链胸甲、皮革胸甲、鞘翅  |
| 护腿 | 下界合金护腿、钻石护腿、铁护腿、金护腿、锁链护腿、皮革护腿     |
| 靴子 | 下界合金靴子、钻石靴子、铁靴子、金靴子、锁链靴子、皮革靴子     |

### 其他物品

| 分类   | 支持的物品         |
| ---- | ------------- |
| 远程武器 | 弓、弩、三叉戟       |
| 其他   | 盾牌、钓鱼竿、剪刀、打火石 |

## 替换规则

### 同类型替换

系统会在同一分类内进行替换：

- 钻石镐损坏 → 搜索所有镐类物品（下界合金镐、钻石镐、铁镐等）
- 铁剑损坏 → 搜索所有剑类物品
- 钻石胸甲损坏 → 搜索所有胸甲类物品（包括鞘翅）

### 搜索顺序

1. 按工作空间顺序搜索
2. 按保险库顺序搜索
3. 按物品在保险库中的位置（页码、槽位）排序
4. 取第一个匹配的物品作为替换

### 替换示例

**场景：** 玩家的钻石镐在挖矿时损坏

**搜索过程：**

1. 遍历玩家加入的所有工作空间
2. 在每个工作空间的保险库中搜索镐类物品
3. 找到一把铁镐（位于「矿石仓库」第1页第5槽）
4. 将铁镐从保险库移除
5. 将铁镐放入玩家主手

**提示消息：**

```
[Zephyrion] 工具已自动替换: 铁镐 (来自仓库: 矿石仓库)
```

## 使用建议

### 建立工具仓库

建议创建专门的工具仓库，存放备用工具：

```
工具仓库
├── 第1页: 镐（按品质分区存放）
├── 第2页: 斧、锹
├── 第3页: 剑、锄
└── 第4页: 装备、其他
```

### 批量准备

挖矿或战斗前，提前在保险库中准备多把同类型工具：

- 长时间挖矿：准备 5-10 把镐
- 大型工程：准备多套不同类型的工具
- PVP 战斗：准备备用武器和装备

### 品质选择

由于系统按位置顺序取用，建议：

- 将低品质工具放在前面的槽位
- 将高品质工具放在后面作为备用
- 或者只存放相同品质的工具

## 注意事项

### 主手替换

- 仅在物品从**主手**损坏时触发替换
- 装备栏（头盔、胸甲等）损坏暂不支持自动替换

### 独立工作空间

在独立工作空间中，只会搜索当前玩家自己存储的物品。

### 无替换物品

如果保险库中没有同类型物品，系统会提示：

```
[Zephyrion] 未找到可替换的工具: DIAMOND_PICKAXE
```

### 附魔和NBT

替换的物品会保留其原有属性：

- 附魔效果
- 自定义名称
- Lore 内容
- 耐久度
- 其他 NBT 数据

## 与自动拾取配合

可以将自动替换与自动拾取功能结合使用：

1. 设置自动拾取规则，将挖到的矿石自动存入保险库
2. 设置另一个保险库存放备用工具
3. 工具损坏时自动替换，矿石自动存储
4. 实现无缝的长时间挖矿体验

### 配置示例

**矿石仓库自动拾取规则：**

```
拾取规则:
- type:DIAMOND
- type:EMERALD  
- type:GOLD_INGOT
- type:IRON_INGOT
- type:COAL
- type:LAPIS_LAZULI
- type:REDSTONE
- type:COPPER_INGOT
```

**工具仓库：**

- 存放多把备用镐
- 不需要设置自动拾取规则

## 常见问题

### Q: 为什么工具损坏后没有自动替换？

A: 检查以下情况：

1. 是否拥有 `zephyrion.auto-replace-tool` 权限
2. 保险库中是否有同类型的工具
3. 损坏的物品是否在支持列表中

### Q: 可以指定从哪个保险库取替换物品吗？

A: 目前不支持指定保险库，系统会按顺序搜索所有可访问的保险库。

### Q: 替换的优先级是什么？

A: 按以下顺序：

1. 工作空间顺序（加入顺序）
2. 保险库顺序（创建顺序）
3. 物品位置（页码 → 槽位）

### Q: 装备损坏会自动替换吗？

A: 目前仅支持主手物品损坏时的替换。装备栏物品（穿戴的盔甲）损坏暂不触发自动替换。

### Q: 鞘翅损坏会用胸甲替换吗？

A: 会的。鞘翅和胸甲属于同一分类，系统会搜索所有胸甲类物品进行替换。